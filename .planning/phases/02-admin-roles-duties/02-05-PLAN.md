---
phase: 02-admin-roles-duties
plan: 05
type: execute
wave: 3
depends_on: ["02-03", "02-04"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Admin can create a role and add duties with full demands"
    - "Data persists across page refreshes"
    - "Copy role creates complete duplicate"
    - "All success criteria from ROADMAP are met"
  artifacts: []
  key_links: []
---

<objective>
Verify the complete admin roles and duties workflow end-to-end.

Purpose: Confirm all ADMIN-01 to ADMIN-12 requirements are met before marking phase complete.
Output: Verification results confirming or identifying gaps.
</objective>

<execution_context>
@C:\Users\Paul\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Paul\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-admin-roles-duties/02-01-SUMMARY.md
@.planning/phases/02-admin-roles-duties/02-02-SUMMARY.md
@.planning/phases/02-admin-roles-duties/02-03-SUMMARY.md
@.planning/phases/02-admin-roles-duties/02-04-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete admin UI for RTW roles and duties management</what-built>
  <how-to-verify>
1. Start the dev server: npm run dev

2. Navigate to http://localhost:5173/admin/roles

3. Test Role CRUD (ADMIN-01 to ADMIN-04):
   - [ ] Click "Add Role" - form appears
   - [ ] Create "Warehouse Worker" role with description
   - [ ] Role appears in list with "0 duties" count
   - [ ] Click edit, change description, save
   - [ ] Verify change persists after refresh

4. Test Duty CRUD (ADMIN-05 to ADMIN-11):
   - [ ] Click "Manage Duties" on Warehouse Worker role
   - [ ] Click "Add Duty" - form with demand matrix appears
   - [ ] Create "Forklift Operation" duty:
         - Name: Forklift Operation
         - Modifiable: Yes
         - Risk Flags: Add "Fall Risk"
         - Set demands: Sitting=Constantly, Standing=Occasionally, Concentration=Frequently
   - [ ] Duty appears in list
   - [ ] Edit duty, add "Lifting" demand with 15kg max
   - [ ] Verify weight input appeared after selecting frequency
   - [ ] Save and verify changes persist

5. Test Copy Role (ADMIN-12):
   - [ ] On duties list, click "Copy Role"
   - [ ] Enter new name "Warehouse Worker (Night Shift)"
   - [ ] Verify new role created with copied duties
   - [ ] Verify demands also copied

6. Test Soft Delete:
   - [ ] Delete the copied role's duty
   - [ ] Delete the copied role
   - [ ] Verify both gone from lists

7. Verify Data Persistence:
   - [ ] Refresh page, verify all data still there
   - [ ] Log out and log back in, verify data remains
  </how-to-verify>
  <resume-signal>
Type "approved" if all checks pass.
Otherwise describe which checks failed.
  </resume-signal>
</task>

</tasks>

<verification>
All ADMIN requirements verified through manual testing:
- [ ] ADMIN-01: List all roles - verified in step 3
- [ ] ADMIN-02: Create role - verified in step 3
- [ ] ADMIN-03: Edit role - verified in step 3
- [ ] ADMIN-04: Delete role - verified in step 6
- [ ] ADMIN-05: List duties - verified in step 4
- [ ] ADMIN-06: Create duty - verified in step 4
- [ ] ADMIN-07: Physical demands - verified in step 4
- [ ] ADMIN-08: Cognitive demands - verified in step 4
- [ ] ADMIN-09: Risk flags - verified in step 4
- [ ] ADMIN-10: Edit duty - verified in step 4
- [ ] ADMIN-11: Delete duty - verified in step 6
- [ ] ADMIN-12: Copy role - verified in step 5
</verification>

<success_criteria>
All 12 ADMIN requirements pass manual verification. Phase 2 success criteria from ROADMAP met:
1. Admin can create a role with duties
2. Each duty has a complete demands matrix
3. Duties can be marked modifiable or fixed
4. Role can be copied as template
5. Data persists and displays correctly
</success_criteria>

<output>
After completion, create `.planning/phases/02-admin-roles-duties/02-05-SUMMARY.md`
Update `.planning/STATE.md` to mark Phase 2 complete.
Update `.planning/ROADMAP.md` to mark Phase 2 checkbox.
</output>
