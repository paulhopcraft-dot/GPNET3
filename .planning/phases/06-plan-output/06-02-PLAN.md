---
phase: 06-plan-output
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - client/src/styles/print.css
  - client/src/components/rtw/PlanSummaryHeader.tsx
  - client/src/components/rtw/MedicalConstraintsCard.tsx
  - client/src/components/rtw/DutiesSection.tsx
  - client/src/components/rtw/ScheduleSection.tsx
  - client/src/index.css
autonomous: true

must_haves:
  truths:
    - "Print CSS hides navigation and controls when printing (OUT-09)"
    - "Print CSS preserves suitability colors for matrix cells (OUT-09)"
    - "Section components display worker, role, injury details (OUT-01)"
    - "Section components show schedule and duties clearly (OUT-04, OUT-05, OUT-06)"
  artifacts:
    - path: "client/src/styles/print.css"
      provides: "Print-specific media query styles"
      contains: "@media print"
    - path: "client/src/components/rtw/PlanSummaryHeader.tsx"
      provides: "Worker/role/injury header component"
      exports: ["PlanSummaryHeader"]
    - path: "client/src/components/rtw/MedicalConstraintsCard.tsx"
      provides: "Medical constraints display"
      exports: ["MedicalConstraintsCard"]
    - path: "client/src/components/rtw/DutiesSection.tsx"
      provides: "Included and excluded duties display"
      exports: ["DutiesSection"]
    - path: "client/src/components/rtw/ScheduleSection.tsx"
      provides: "Week-by-week schedule display"
      exports: ["ScheduleSection"]
  key_links:
    - from: "client/src/index.css"
      to: "client/src/styles/print.css"
      via: "CSS import"
      pattern: "@import.*print"
---

<objective>
Create print CSS styles and reusable section components for displaying RTW plan details.

Purpose: Build UI building blocks for OUT-01 (summary header), OUT-02 (constraints), OUT-04/05/06 (duties and schedule), and OUT-09 (print styling).
Output: Print stylesheet with @media print rules, and 4 display components ready for composition in PlanDetailView.
</objective>

<execution_context>
@C:\Users\Paul\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Paul\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-plan-output/06-RESEARCH.md
@client/src/components/rtw/PlanPreview.tsx
@client/src/lib/suitabilityUtils.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Print Stylesheet</name>
  <files>client/src/styles/print.css, client/src/index.css</files>
  <action>
Create `client/src/styles/print.css` with @media print rules for RTW plan output:

```css
/* Print-specific styles for RTW Plan Output (Phase 6) */

@media print {
  /* Hide non-printable elements */
  .print\:hidden,
  nav,
  aside,
  footer,
  header:not(.plan-header),
  button:not(.print-include),
  .sidebar,
  .navigation,
  .toast,
  [role="dialog"],
  .no-print {
    display: none !important;
  }

  /* Reset page layout */
  body {
    font-size: 11pt;
    line-height: 1.4;
    color: black;
    background: white;
    margin: 0;
    padding: 0;
  }

  /* Page break control */
  .page-break-before {
    page-break-before: always;
    break-before: page;
  }

  .page-break-after {
    page-break-after: always;
    break-after: page;
  }

  .avoid-break {
    page-break-inside: avoid;
    break-inside: avoid;
  }

  /* Plan section styling */
  .plan-header {
    border-bottom: 2px solid #333;
    padding-bottom: 12px;
    margin-bottom: 16px;
  }

  .plan-section {
    page-break-inside: avoid;
    break-inside: avoid;
    margin-bottom: 20px;
  }

  /* Card component print optimization */
  .card {
    border: 1px solid #ddd;
    box-shadow: none !important;
    margin-bottom: 16px;
  }

  /* Table optimizations */
  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 10pt;
  }

  th, td {
    border: 1px solid #ccc;
    padding: 6px 8px;
    text-align: left;
  }

  th {
    background-color: #f5f5f5 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  /* Preserve suitability colors in print (critical for matrix) */
  .bg-green-50,
  .bg-green-100 {
    background-color: #dcfce7 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  .bg-yellow-50,
  .bg-yellow-100 {
    background-color: #fef9c3 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  .bg-red-50,
  .bg-red-100 {
    background-color: #fee2e2 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  .bg-blue-50 {
    background-color: #eff6ff !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
  }

  /* Text colors for print */
  .text-green-600, .text-green-700 {
    color: #16a34a !important;
  }

  .text-yellow-600, .text-yellow-700 {
    color: #ca8a04 !important;
  }

  .text-red-600, .text-red-700 {
    color: #dc2626 !important;
  }

  /* Badge styling for print */
  .badge {
    border: 1px solid #666;
    padding: 2px 6px;
  }

  /* Icons - hide decorative, show functional */
  .lucide:not(.print-icon) {
    opacity: 0.7;
    width: 14px;
    height: 14px;
  }

  /* Links - show URL in print */
  a[href]:after {
    content: none; /* Don't show URLs for internal links */
  }

  /* Page margins and headers */
  @page {
    size: A4 portrait;
    margin: 20mm 15mm;
  }

  @page :first {
    margin-top: 15mm;
  }
}
```

Then update `client/src/index.css` to import the print stylesheet:
- Add `@import './styles/print.css';` near the top (after Tailwind imports)
  </action>
  <verify>
- File exists: client/src/styles/print.css
- Import added to index.css
- `npm run build` succeeds
  </verify>
  <done>Print CSS created with @media print rules for plan output, preserving suitability colors and controlling page breaks</done>
</task>

<task type="auto">
  <name>Task 2: Create Plan Section Components</name>
  <files>
    client/src/components/rtw/PlanSummaryHeader.tsx
    client/src/components/rtw/MedicalConstraintsCard.tsx
    client/src/components/rtw/ScheduleSection.tsx
    client/src/components/rtw/DutiesSection.tsx
  </files>
  <action>
Create 4 display components following patterns from 06-RESEARCH.md:

**1. PlanSummaryHeader.tsx (OUT-01)**
- Props: workerName, company, dateOfInjury, roleName, planType, planStatus, startDate
- Display:
  - "Return to Work Plan" title
  - Worker name with User icon
  - Company with Building2 icon
  - Injury date with Calendar icon (formatted with date-fns)
  - Role name with Briefcase icon
  - Status badge (draft=gray, pending=yellow, approved=green, rejected=red)
  - Plan type label and start date
- Use Card from shadcn/ui
- Add className "plan-header" for print styling

**2. MedicalConstraintsCard.tsx (OUT-02)**
- Props: constraints (object with restriction fields), restrictionReviewDate
- Display:
  - Card with AlertTriangle icon header
  - Restriction review date warning box (amber background)
  - "Cannot Perform" section with red X icons for each restriction
  - "Capacity Indicators" section with green Check icons
  - Handle null constraints gracefully
- Add className "plan-section avoid-break" for print

**3. ScheduleSection.tsx (OUT-05)**
- Props: schedule array, startDate
- Display:
  - Card with "Week-by-Week Schedule" title
  - Table: Week | Hours/Day | Days/Week | Total Hours | Date Range
  - Calculate start/end date for each week based on startDate
  - Use date-fns for date math and formatting
- Add className "plan-section avoid-break"

**4. DutiesSection.tsx (OUT-04, OUT-06)**
- Props: includedDuties, excludedDuties arrays
- Display:
  - Two sub-sections: "Included Duties" and "Excluded Duties"
  - Included: Green checkmark, duty name, "With modification" badge if applicable, modification notes
  - Excluded: Amber alert icon, duty name, excluded reason
  - Count badges showing number in each category
- Use existing suitabilityUtils for formatting
- Add className "plan-section"

All components should:
- Import from shadcn/ui (Card, Badge, Table)
- Use lucide-react icons
- Use date-fns for date formatting
- Be TypeScript with explicit prop interfaces
  </action>
  <verify>
- Files exist in client/src/components/rtw/
- `npm run build` succeeds
- No TypeScript errors
  </verify>
  <done>4 plan section components created for displaying worker context, constraints, schedule, and duties</done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. Print CSS imported and available
3. All 4 section components export correctly
4. Components use consistent styling patterns
</verification>

<success_criteria>
- Print CSS correctly hides navigation and preserves colors
- PlanSummaryHeader shows all OUT-01 required fields
- MedicalConstraintsCard displays restrictions clearly (OUT-02)
- ScheduleSection renders week-by-week table (OUT-05)
- DutiesSection separates included/excluded with reasons (OUT-04, OUT-06)
</success_criteria>

<output>
After completion, create `.planning/phases/06-plan-output/06-02-SUMMARY.md`
</output>
