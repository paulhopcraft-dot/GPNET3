---
phase: 06-plan-output
plan: 04
type: execute
wave: 3
depends_on: ["06-01", "06-02", "06-03"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Plan page displays complete plan with worker context (OUT-01)"
    - "Medical constraints section shows restrictions (OUT-02)"
    - "Physical demands matrix displays with colors (OUT-03)"
    - "Duties section shows included and excluded duties (OUT-04, OUT-06)"
    - "Schedule section shows week-by-week progression (OUT-05)"
    - "Manager email generates and displays (OUT-07)"
    - "Email is locked after plan approval (OUT-08)"
    - "Print produces clean output with preserved colors (OUT-09)"
    - "PDF export works via browser print-to-PDF (OUT-10)"
  artifacts: []
  key_links: []
---

<objective>
Verify all Phase 6 Plan Output requirements are implemented and working correctly.

Purpose: Human verification that OUT-01 through OUT-10 requirements are satisfied by the implemented components.
Output: Verified phase with APPROVED status or issues identified for gap closure.
</objective>

<execution_context>
@C:\Users\Paul\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Paul\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-plan-output/06-01-SUMMARY.md
@.planning/phases/06-plan-output/06-02-SUMMARY.md
@.planning/phases/06-plan-output/06-03-SUMMARY.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete RTW Plan Output functionality including:
- Full plan detail display (worker, role, injury, constraints, matrix, schedule, duties)
- Manager email generation with AI-powered drafting
- Print-friendly view with preserved colors
- PDF export via browser print dialog
  </what-built>
  <how-to-verify>
**Prerequisites:**
1. Ensure dev server is running: `npm run dev`
2. Have an existing RTW plan created (from Phase 5 wizard)
3. Know the plan ID to navigate to

**Verification Steps:**

**OUT-01: Plan Summary Header**
1. Navigate to `/rtw/plans/{planId}`
2. Verify header shows:
   - Worker name
   - Company name
   - Date of injury
   - Role name
   - Plan type (Normal Hours/Partial Hours/Graduated Return)
   - Plan status badge (Draft/Pending/Approved)
   - Start date

**OUT-02: Medical Constraints**
3. Verify Medical Constraints card shows:
   - Restriction review date (if applicable)
   - "Cannot Perform" restrictions with red X icons
   - "Capacity Indicators" with green checkmarks (if any)

**OUT-03: Physical Demands Matrix**
4. Verify FunctionalAbilityMatrix displays:
   - All duties as rows
   - Demand categories as columns
   - Color-coded cells (green/yellow/red)
   - Sticky first column (duty name)

**OUT-04 & OUT-06: Duties Sections**
5. Verify Duties section shows:
   - Included duties with checkmarks
   - "With modification" badges where applicable
   - Modification notes displayed
   - Excluded duties with reasons

**OUT-05: Schedule Section**
6. Verify Schedule section shows:
   - Week-by-week table
   - Hours per day, days per week, total hours
   - Date ranges for each week

**OUT-07 & OUT-08: Manager Email**
7. Verify Manager Email section:
   - Email subject and body are generated
   - "Copy to Clipboard" button works
   - "Regenerate" button creates new email
   - If plan is approved: fields are disabled and locked message shows

**OUT-09: Print View**
8. Click "Print Plan" button
9. In print preview, verify:
   - Navigation and controls are hidden
   - Suitability colors (green/yellow/red) are preserved
   - Tables are properly formatted
   - Page breaks occur at section boundaries
   - Content is readable at print size

**OUT-10: PDF Export**
10. Click "Export PDF" button (or use "Print Plan")
11. In print dialog, select "Save as PDF"
12. Open saved PDF and verify:
    - All content present
    - Colors preserved
    - Text is searchable (not image-based)
    - Professional appearance

**Edge Cases:**
- Test with a plan that has no excluded duties
- Test with a graduated return plan (multiple schedule weeks)
- Test with a plan that has modification notes
  </how-to-verify>
  <resume-signal>
Type one of:
- "APPROVED" - All OUT-01 to OUT-10 requirements verified working
- "ISSUES: [describe issues]" - Some requirements not met, need gap closure
  </resume-signal>
</task>

</tasks>

<verification>
All 10 OUT requirements verified by human tester:
- [ ] OUT-01: Plan summary displays worker, role, injury details
- [ ] OUT-02: Medical constraints section shows restrictions
- [ ] OUT-03: Physical demands matrix displays with color coding
- [ ] OUT-04: Proposed duties shown with suitability status
- [ ] OUT-05: Proposed schedule shows week-by-week
- [ ] OUT-06: Excluded duties shown with reasons
- [ ] OUT-07: Manager email generated from plan
- [ ] OUT-08: Email editable only before approval
- [ ] OUT-09: Print-friendly view works
- [ ] OUT-10: PDF export works
</verification>

<success_criteria>
Human confirms "APPROVED" indicating all Phase 6 requirements are satisfied.
</success_criteria>

<output>
After completion, create `.planning/phases/06-plan-output/06-04-SUMMARY.md`
</output>
